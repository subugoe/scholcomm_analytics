---
title: "Recent Changes in Document type classification in OpenAlex compared to Web of Science and Scopus"
description: In June 2024, we published a preprint on the classification of document types in Openalex and compared it with the scholarly databases Web of Science, Scopus, PubMed and Semantic Scholar. In this follow-up study, we want to investigate further developments in OpenAlex and compare the results with the proprietary databases Scopus and Web of Science. 
author:
  - name: Nick Haupka 
    affiliation: State and University Library Göttingen
    affiliation_url: https://www.sub.uni-goettingen.de/
    orcid_id: 0009-0002-6478-6789
  - name: Sophia Dörner
    affiliation: State and University Library Göttingen
    affiliation_url: https://www.sub.uni-goettingen.de/
    orcid_id: 0000-0001-8747-3422
  - name: Najko Jahn
    affiliation: State and University Library Göttingen
    affiliation_url: https://www.sub.uni-goettingen.de/
    orcid_id: 0000-0001-5105-1463
date: "`r Sys.Date()`"
output: distill::distill_article
bibliography: literature.bib
draft: TRUE
css: vis.css
---

```{r, echo = FALSE, message = FALSE, warning = FALSE}
knitr::opts_chunk$set(
  comment = "#>",
  collapse = TRUE,
  warning = FALSE,
  message = FALSE,
  echo = FALSE
)
options(scipen = 999, digits = 2)
knitr::knit_hooks$set(
  inline = function(x) {
    if (is.numeric(x)) {
      return(prettyNum(x, big.mark = ","))
    } else{
      return(x)
    }
  }
)
```

```{r, echo=FALSE,message = FALSE, warning = FALSE}
library(here)
library(tidyverse)
library(networkD3)
library(htmlwidgets)
library(reactable)
library(htmltools)
library(sankeyD3) # Not on CRAN, but here <https://github.com/fbreitwieser/sankeyD3>
```

In June 2024, we submitted an analysis of publication and document types in OpenAlex in comparison with the proprietary databases Web of Science and Scopus and the open data sources SemanticScholar and PubMed [@haupka_2024].
We found substantial differences between these databases: While Web of Science and Scopus provided a comprehensive set of document types to describe work published in journals, OpenAlex supported only a comparably limited number of types.
Notably, OpenAlex lacked a distinction between research articles and reviews, which can be crucial when calculating citation indicators. 
In line with related studies [@alperin_analysis_2024], we also observed discrepancies in the number of publications when restricting to certain document types.

Meanwhile, in [late May]((https://groups.google.com/g/openalex-users/c/YujaIIjY02A)) and [late July 2024](https://groups.google.com/g/openalex-users/c/eXiWOlBXKC0), OpenAlex introduced extended approaches to obtain publication and document types.
Among the four new categories were preprints and reviews. Using [PubMed](https://groups.google.com/g/openalex-users/c/eXiWOlBXKC0), OpenAlex identified approximately 4 million journal articles as editorials, erratum, letters, preprints, reviews, or retractions. 

Of course, we wanted to to know how these improvements affect our findings.
We therefore replicated our methods and re-applied it to the recent changes.
Using the same shared corpus of works published in journals between 2012 and 2022, we demonstrate that OpenAlex's recent changes provide a more nuanced set of document types to refine scholarly works. 
However, the comparison with Web of Science and Scopus reveals that there remain considerable differences. 

## Data and Methods

We reused the dataset that was compiled for @haupka_2024 using data from mid 2023 and updated the respective document types to match current developments. 
Our initial dataset included approximately 9.5 million publications that were included in OpenAlex as well as in Scopus, WoS, PubMed, and Semantic Scholar. 
In addition, to align with the methods applied in our [preprint](https://arxiv.org/abs/2406.15154), we restricted the data to the publication years 2012 to 2022 and only considered items from journals. 
OpenAlex data used were from July 2024. 
The Scopus and WoS data were retrieved from the [German Competence Network of Bibliometrics](https://bibliometrie.info), using the April 2024 snapshots.

After matching data from OpenAlex with Scopus and Web of Science by DOI, we found that the absolute numbers for the shared document type categories are very similar between the databases. 
To avoid bias stemming from the PubMed data we originally worked with, whose document types OpenAlex has adopted with the latest changes, we performed a pairwise comparison of OpenAlex with Scopus and WoS. 

## Findings

```{r, echo=FALSE, message=FALSE, warning=FALSE}
oal2324_scp_t <- read_csv(here("_posts/openalex_document_types/data","oal2324_scp_t.csv"))
oal2324_wos_t <- read_csv(here("_posts/openalex_document_types/data","oal2324_wos_t.csv"))
scp_oal2324 <- read_csv(here("_posts/openalex_document_types/data","scp_oal2324.csv"))
wos_oal2324 <- read_csv(here("_posts/openalex_document_types/data","wos_oal2324.csv"))
```

The following figures compare the OpenAlex classification system with those of Scopus and Web of Science. 
Notably, the proportion of articles and reviews is relatively equal between the data sources. 
This is an important improvement compared to 2023, when OpenAlex did not distinguish between research articles and reviews. 

Comparing OpenAlex data from 2023 and 2024 with Scopus data from 2024, Figure \@ref(fig:oalscp) shows, regarding publications indexed in both data sources, that OpenAlex classified `r formatC(sum(oal2324_scp_t[oal2324_scp_t$oal23_type == "ARTICLE", ]$n), big.mark = ",", format = "d")` publications (`r paste0(round(sum(oal2324_scp_t[oal2324_scp_t$oal23_type == "ARTICLE", ]$n) / sum(oal2324_scp_t$n) * 100, 2),"%")`) as articles in 2023 and `r formatC(sum(oal2324_scp_t[oal2324_scp_t$oal24_type == "article", ]$n), big.mark = ",", format = "d")` publications (`r paste0(round(sum(oal2324_scp_t[oal2324_scp_t$oal24_type == "article", ]$n) / sum(oal2324_scp_t$n) * 100, 2),"%")`) in 2024 while Scopus classified `r formatC(sum(oal2324_scp_t[oal2324_scp_t$scp_type == "Article", ]$n), big.mark = ",", format = "d")` publications (`r paste0(round(sum(oal2324_scp_t[oal2324_scp_t$scp_type == "Article", ]$n) / sum(oal2324_scp_t$n) * 100, 2),"%")`) with this document type. 
Concerning publications classified as reviews, Figure \@ref(fig:oalscp) shows that within OpenAlex this document type is assigned to `r formatC(sum(oal2324_scp_t[oal2324_scp_t$oal24_type == "review", ]$n), big.mark = ",", format = "d")` publications (`r paste0(round(sum(oal2324_scp_t[oal2324_scp_t$oal24_type == "review", ]$n) / sum(oal2324_scp_t$n) * 100, 2),"%")`) in 2024 and within Scopus to `r formatC(sum(oal2324_scp_t[oal2324_scp_t$scp_type == "Review", ]$n), big.mark = ",", format = "d")` (`r paste0(round(sum(oal2324_scp_t[oal2324_scp_t$scp_type == "Review", ]$n) / sum(oal2324_scp_t$n) * 100, 2),"%")`). 





```{r oalscp, echo=FALSE,message=FALSE, warning=FALSE, fig.cap="Comparison of OpenAlex and Scopus for publication years 2012-2022"}
nodes <- oal2324_scp_t %>%
  group_by(oal23_type,oal24_type,scp_type) %>%
  select(oal23_type,oal24_type,scp_type) %>%
  unlist() %>%
  unique() %>%
  enframe("name","label") %>%
  mutate(name = as.character(name))

links <- bind_rows(
         oal2324_scp_t %>% 
          transmute(source=as.character(oal23_type), target=as.character(oal24_type), value=noal),
         oal2324_scp_t %>% 
          transmute(source=as.character(oal24_type), target=as.character(scp_type), value=n24scp)) %>%
         mutate(source = match(source, nodes$label) -1,
                target = match(target, nodes$label) -1) %>%
         ungroup() %>%
         select(source,target,value) %>%
         group_by(source,target) %>%
         arrange(desc(value)) %>%
         distinct()

# Gruppen für jeden Knoten erstellen
nodes$group <- as.factor(ifelse(nodes$name %in% c(1,2,3,4,5,6,7), "oal23", 
                                ifelse(nodes$name %in% c(8,9,10,11,12,13,14,15,16), "oal24", "scp")))

# Farben für die source und target Knoten definieren
colours <- 'd3.scaleOrdinal() .domain(["oal23", "oal24","scp"]) .range(["#ffffff","#4d4d4d", "#d82222a0"])'

oal_scp_sn <- sankeyNetwork(Links = links, Nodes = nodes, Source = "source",
              Target = "target", Value = "value", NodeID = "label", fontSize = 12, nodePadding = 20, 
                    zoom = TRUE, showNodeValues = FALSE, numberFormat = ",d", fontFamily = "sans-serif", iterations=0,NodeGroup="group", colourScale = colours,dragX = TRUE,dragY = TRUE, xAxisDomain = c("OpenAlex (2023)","OpenAlex (2024)","Scopus (2024)"),xScalingFactor = .9, height=700)

oal_scp_sn <- onRender(
  oal_scp_sn,
  '
  function(el,x){
    var lowerCase = /^[a-z]/;
    var upperCase = /^[A-Z]/;
    var allCaps = /^[A-Z-]+$/;

    var labels = d3.select(el).selectAll(".node text");

    labels.each(function(d) {
      d.isAllCaps = allCaps.test(d.name);
      d.isLowerCase = lowerCase.test(d.name);
      d.isUpperCase = upperCase.test(d.name);

      let text = d.name.toLowerCase();
      let capitalized = text.replace(/(\\b|-)\\w/g, function(char) {
        return char.toUpperCase();
      });

      d3.select(this).text(capitalized + " (" + d3.format(",d")(d.value) + ")");
    });

    labels.attr("transform", function(d) {
        var box = this.getBBox();
        var adjust = box.width 
        if (d.isAllCaps) {
          return "translate(" + (-adjust - 40) + ",0)";
        }
        else if (d.isUpperCase) {
          return "translate(5,0)";
        }
        else {
          return "translate(5,0)";
        }
    });

    var zoomLayer = document.querySelector(".zoom-layer");
    if(zoomLayer){
      zoomLayer.setAttribute("transform", "translate(81,67) scale(0.75)");
    }

    labels.filter(function(d) { return d.isAllCaps; })
      .attr("x",x.options.nodeWidth - 10)
      .attr("text-anchor", "end")

    labels.filter(function(d) { return d.isLowerCase; })
      .attr("x", x.options.nodeWidth + 10)
      .attr("text-anchor", "start")
    
    labels.filter(function(d) { return d.isUpperCase; })
      .attr("x", x.options.nodeWidth + 10)
      .attr("text-anchor", "start")
    
    d3.select(el)
    .style("margin-left", "auto")
    .style("margin-right", "auto")
    .style("display", "block");
    
  }
  '
)
oal_scp_sn
```


When comparing OpenAlex data from 2023 and 2024, respectively, with Web of Science data from 2024 and considering publications indexed in both data sources, Figure \@ref(fig:oalwos) shows that publications classified as articles amount to `r formatC(sum(oal2324_wos_t[oal2324_wos_t$oal23_type == "ARTICLE", ]$n), big.mark = ",", format = "d")` (`r paste0(round(sum(oal2324_wos_t[oal2324_wos_t$oal23_type == "ARTICLE", ]$n) / sum(oal2324_wos_t$n) * 100, 2),"%")`) in OpenAlex for 2023 and `r formatC(sum(oal2324_wos_t[oal2324_wos_t$oal24_type == "article", ]$n), big.mark = ",", format = "d")` (`r paste0(round(sum(oal2324_wos_t[oal2324_wos_t$oal24_type == "article", ]$n) / sum(oal2324_wos_t$n) * 100, 2),"%")`) in OpenAlex for 2024 while in WoS publications with this document type amount to `r formatC(sum(oal2324_wos_t[oal2324_wos_t$wos_type == "Article", ]$n), big.mark = ",", format = "d")` (`r paste0(round(sum(oal2324_wos_t[oal2324_wos_t$wos_type == "Article", ]$n) / sum(oal2324_wos_t$n) * 100, 2),"%")`). 
In contrast to the comparison of OpenAlex and Scopus, the difference between the proportions of publications classified as articles is much more pronounced here. 
Regarding publications classified as reviews, Figure \@ref(fig:oalwos) shows, that within OpenAlex this document type is merely assigned to publications within the 2024 data set, these amount to `r formatC(sum(oal2324_wos_t[oal2324_wos_t$oal24_type == "review", ]$n), big.mark = ",", format = "d")` (`r paste0(round(sum(oal2324_wos_t[oal2324_wos_t$oal24_type == "review", ]$n) / sum(oal2324_wos_t$n) * 100, 2),"%")`).
Within the WoS data set `r formatC(sum(oal2324_wos_t[oal2324_wos_t$wos_type == "Review", ]$n), big.mark = ",", format = "d")` publications (`r paste0(round(sum(oal2324_wos_t[oal2324_wos_t$wos_type == "Review", ]$n) / sum(oal2324_wos_t$n) * 100, 2),"%")`) have been classified as reviews. 
The proportion of these document types is thus noticeably higher in OpenAlex.

Additionally, Figures \@ref(fig:oalscp) and \@ref(fig:oalwos) demonstrate that the commercial data sources still classify more items as editorial content than OpenAlex. 
Of the publications classified as articles in OpenAlex for 2024, the figures show that a total amount of `r formatC(sum(oal2324_scp_t[oal2324_scp_t$oal24_type == "article" & oal2324_scp_t$scp_type %in% c("Editorial", "Letter"), ]$n), big.mark = ",", format = "d")` (Scopus) and `r formatC(sum(oal2324_wos_t[oal2324_wos_t$oal24_type == "article" & oal2324_wos_t$wos_type %in% c("Editorial Material", "Letter"), ]$n), big.mark = ",", format = "d")`  (WoS) publications are labelled as editorials or letters in Scopus and Web of Science, respectively.


```{r oalwos, echo=FALSE,message=FALSE, warning=FALSE,fig.cap="Comparison of OpenAlex and Web of Science for publication years 2012-2022"}
nodes <- oal2324_wos_t %>%
  group_by(oal23_type,oal24_type,wos_type) %>%
  select(oal23_type,oal24_type,wos_type) %>%
  unlist() %>%
  unique() %>%
  enframe("name","label") %>%
  mutate(name = as.character(name))

links <- bind_rows(
         oal2324_wos_t %>% 
          transmute(source=as.character(oal23_type), target=as.character(oal24_type), value=noal),
         oal2324_wos_t %>% 
          transmute(source=as.character(oal24_type), target=as.character(wos_type), value=n24wos)) %>%
         mutate(source = match(source, nodes$label) -1,
                target = match(target, nodes$label) -1) %>%
         ungroup() %>%
         select(source,target,value) %>%
         group_by(source,target) %>%
         arrange(desc(value)) %>%
         distinct()

# Gruppen für jeden Knoten erstellen
nodes$group <- as.factor(ifelse(nodes$name %in% c(1,2,3,4,5,6,7), "oal23", 
                                ifelse(nodes$name %in% c(8,9,10,11,12,13,14,15,16,17), "oal24", "wos")))

# Farben für die source und target Knoten definieren
colours <- 'd3.scaleOrdinal() .domain(["oal23", "oal24","wos"]) .range(["#ffffff","#4d4d4d", "#9e0059a0"])'

oal_wos_sn <- sankeyNetwork(Links = links, Nodes = nodes, Source = "source",
              Target = "target", Value = "value", NodeID = "label", fontSize = 12, nodePadding = 20, 
                    zoom = TRUE, showNodeValues = FALSE, numberFormat = ",d", fontFamily = "sans-serif", iterations=0,NodeGroup="group", colourScale = colours,dragX = TRUE,dragY = TRUE, xAxisDomain = c("OpenAlex (2023)","OpenAlex (2024)","Web of Science (2024)"),xScalingFactor = .9, height=700)

oal_wos_sn <- onRender(
  oal_wos_sn,
  '
  function(el,x){
    var lowerCase = /^[a-z]/;
    var upperCase = /^[A-Z]/;
    var allCaps = /^[A-Z-]+$/;

    var labels = d3.select(el).selectAll(".node text");

    labels.each(function(d) {
      d.isAllCaps = allCaps.test(d.name);
      d.isLowerCase = lowerCase.test(d.name);
      d.isUpperCase = upperCase.test(d.name);

      let text = d.name.toLowerCase();
      let capitalized = text.replace(/(\\b|-)\\w/g, function(char) {
        return char.toUpperCase();
      });

      d3.select(this).text(capitalized + " (" + d3.format(",d")(d.value) + ")");
    });

    labels.attr("transform", function(d) {
        var box = this.getBBox();
        var adjust = box.width 
        if (d.isAllCaps) {
          return "translate(" + (-adjust - 40) + ",0)";
        }
        else if (d.isUpperCase) {
          return "translate(5,0)";
        }
        else {
          return "translate(5,0)";
        }
    });

    var zoomLayer = document.querySelector(".zoom-layer");
    if(zoomLayer){
      zoomLayer.setAttribute("transform", "translate(80,63) scale(0.70)");
    }

    labels.filter(function(d) { return d.isAllCaps; })
      .attr("x",x.options.nodeWidth - 10)
      .attr("text-anchor", "end")

    labels.filter(function(d) { return d.isLowerCase; })
      .attr("x", x.options.nodeWidth + 10)
      .attr("text-anchor", "start")
    
    labels.filter(function(d) { return d.isUpperCase; })
      .attr("x", x.options.nodeWidth + 10)
      .attr("text-anchor", "start")
    
    d3.select(el)
    .style("margin-left", "auto")
    .style("margin-right", "auto")
    .style("display", "block");
    
  }
  '
)
oal_wos_sn
```


This observation is corroborated by a view of the following tables. 
Here, the document types contained in each database were aggregated in three overarching categories: research discourse, editorial discourse and not assigned. 
Mapping tables that we used for reclassifying the document types can be found in the appendix of @haupka_2024. 
In addition, publications with the document type "preprint", which was added to OpenAlex in [May 2024](https://groups.google.com/g/openalex-users/c/YujaIIjY02A), were also assigned to the research discourse category. 
Both tables show that for the editorial discourse category the proportion of publications labelled as editorial content in OpenAlex in 2024 is still about 3% lower than in Scopus and Web of Science. 

<p/>
<p/>


```{r, echo=FALSE, message=FALSE, warning=FALSE}
react_bar_chart <-
  function(label,
           width = "100%",
           height = "14px",
           fill = "#00bfc4",
           background = NULL) {
    bar <-
      htmltools::div(style = list(
        background = fill,
        width = width,
        height = height
      ))
    chart <-
      htmltools::div(
        style = list(
          flexGrow = 1,
          marginLeft = "6px",
          background = background
        ),
        bar
      )
    htmltools::div(
      style = list(
        display = "flex",
        alignItems = "center",
        justifyContent = "flex-end"
      ),
      label,
      chart
    )
  }
```


```{r,layout='l-body-outset', echo=FALSE, message=FALSE, warning=FALSE}
scp_oal2324_reactable <- reactable(scp_oal2324,
  pagination = TRUE,
  highlight = TRUE,
  defaultColDef = colDef(vAlign = "center", headerClass = "header", headerVAlign = "center", align = "center"),
  compact = TRUE,
  columns = list(
     name = colDef(name="", align = "left",minWidth = 80),
     rd_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number  border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(scp_oal2324$rd_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    rd_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 2),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 2), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    ),
     ed_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(scp_oal2324$ed_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    ed_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 2),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 2), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    ),
    na_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(scp_oal2324$na_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    na_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 3),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 3), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    )),
  # Create column groups
  columnGroups = list(
    colGroup(
      name = "Research Discourse",
      columns = c("rd_total", "rd_pct"),
      headerClass = "group-header"
    ),
    colGroup(
      name = "Editorial Discourse",
      columns = c("ed_total", "ed_pct"),
      headerClass = "group-header"
    ),
    colGroup(
      name = "Not Assigned",
      columns = c("na_total", "na_pct"),
      headerClass = "group-header"
    )
  ),
  searchable = FALSE,
  defaultPageSize = 10,
  showPageSizeOptions = TRUE
  )
scp_oal2324_reactable$sizingPolicy$padding <- 4
scp_oal2324_reactable
```

<p/>

```{r, layout='l-body-outset', echo=FALSE, message=FALSE, warning=FALSE}
wos_oal2324_reactable <- reactable(wos_oal2324,
  pagination = TRUE,
  highlight = TRUE,
  defaultColDef = colDef(vAlign = "center", headerClass = "header", headerVAlign = "center", align = "center"),
  compact = TRUE,
  columns = list(
     name = colDef(name="", align = "left",minWidth = 80),
     rd_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(wos_oal2324$rd_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    rd_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 2),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 2), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    ),
     ed_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(wos_oal2324$ed_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    ed_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 2),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 2), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    ),
    na_total = colDef(name = "Total",
                       format = colFormat(separators = TRUE, locales = "en-GB"),
      width = 150,
      style = list(whiteSpace = "pre"),
      class = "number border-left",
      cell = function(value, index) {
        width <- paste0(value * 100 / max(wos_oal2324$na_total), "%")
        value <- format(value, big.mark = ",")
        value <- format(value, width = 10, justify = "right")
        bar <- div(
          class = "bar-chart",
          style = list(marginRight = "6px"),
          div(
            class = "bar",
            style = list(width = width, backgroundColor = "#c3c3c3")
          )
        )
        ### bring it all together, with the 'value' (number) preceding the bar itself
        div(class = "bar-cell", span(class = "number", value), bar)
      },
      align = "center"
    ),
    na_pct = colDef(name = "Pct", format = colFormat(percent = TRUE, digits = 3),
                             cell = function(value) {
        value <- paste0(format(round(value * 100, 3), nsmall = 1), "%")
        value <- format(value, width = 5, justify = "right")
        react_bar_chart(value,
                        width = value,
                        fill = "#000000",
                        background = "#c3c3c3")
      },
      align = "center",
      style = list(whiteSpace = "pre"),
      class = "number",
      html = TRUE,
      minWidth = 100
    )),
  # Create column groups
  columnGroups = list(
    colGroup(
      name = "Research Discourse",
      columns = c("rd_total", "rd_pct"),
      headerClass = "group-header"
    ),
    colGroup(
      name = "Editorial Discourse",
      columns = c("ed_total", "ed_pct"),
      headerClass = "group-header"
    ),
    colGroup(
      name = "Not Assigned",
      columns = c("na_total", "na_pct"),
      headerClass = "group-header"
    )
  ),
  searchable = FALSE,
  defaultPageSize = 10,
  showPageSizeOptions = TRUE
  ) 
wos_oal2324_reactable$sizingPolicy$padding <- 4
wos_oal2324_reactable
```


## Discussion and Conclusion
Our updated analysis demonstrated a considerable improvement of the classification of document types in OpenAlex when comparing it to Scopus and WoS. Compared to data from 2023, the discrepancy in the classification of items has decreased noticeably. This indicates a convergence of the classification system in OpenAlex towards those from proprietary databases, with an enhanced coverage of reviews and editorial materials. In addition, the [rule-based string matching](https://github.com/ourresearch/openalex-guts/blob/main/detective/work_type_detective.py) for recognising paratexts introduced and revised by OpenAlex resulted in more texts being categorised as editorial material than before. This development strengthens OpenAlex's position as a free provider of bibliometric data and makes it more attractive as a competitor to the established bibliometric databases.

## Funding {.appendix}

This work is funded by the Bundesministerium für Bildung und Forschung (BMBF) project KBOPENBIB (16WIK2301E). We acknowledge the support of the [German Competence Center for Bibliometrics](https://bibliometrie.info/).
